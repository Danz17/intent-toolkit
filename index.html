<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0a0a0f">
  <link rel="icon" type="image/png" href="https://adbappcontrol.com/assets/img/logo_blue.png">
  <link rel="apple-touch-icon" href="https://adbappcontrol.com/assets/img/logo_blue.png">
  <title>FRP Toolkit</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

    :root {
      --bg-dark: #0a0a0f;
      --bg-card: #12121a;
      --bg-header: #0d0d14;
      --accent: #00d4ff;
      --accent-dim: #0088aa;
      --warning: #f59e0b;
      --danger: #ef4444;
      --success: #22c55e;
      --text: #e8e8e8;
      --text-dim: #888;
      --border: #1a1a25;
      --header-h: 56px;
      --footer-h: 90px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-dark);
      color: var(--text);
      min-height: 100vh;
      overflow: hidden;
    }

    /* ============ TOP HEADER (FIXED) ============ */
    .top-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--header-h);
      background: var(--bg-header);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 12px;
      z-index: 100;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo img {
      width: 32px;
      height: 32px;
      border-radius: 6px;
    }
    .logo-text {
      font-size: 1.1rem;
      font-weight: 700;
      background: linear-gradient(90deg, var(--accent), #a855f7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header-tabs {
      display: flex;
      gap: 8px;
    }
    .header-tab {
      padding: 8px 16px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-dim);
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .header-tab:active { transform: scale(0.95); }
    .header-tab.active {
      background: var(--accent);
      color: #000;
      border-color: var(--accent);
      font-weight: 600;
    }
    .header-tab.hidden { display: none; }

    /* ============ MAIN CONTENT (SCROLLABLE) ============ */
    .main-content {
      position: fixed;
      top: var(--header-h);
      left: 0;
      right: 0;
      bottom: var(--footer-h);
      overflow-y: auto;
      overflow-x: hidden;
      padding: 12px;
      -webkit-overflow-scrolling: touch;
    }

    /* View containers */
    .view { display: none; }
    .view.active { display: block; }

    /* ============ INTENT VIEW ============ */
    .category-section {
      margin-bottom: 12px;
    }
    .cat-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 14px;
      background: linear-gradient(135deg, var(--bg-card) 0%, #1a1a28 100%);
      border: 1px solid var(--border);
      border-radius: 12px;
      cursor: pointer;
      user-select: none;
      transition: all 0.2s;
    }
    .cat-header:active { transform: scale(0.98); }
    .cat-header.open { border-radius: 12px 12px 0 0; border-bottom: none; }
    .cat-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      font-size: 0.95rem;
    }
    .cat-icon { font-size: 1.2rem; }
    .cat-count {
      background: var(--accent);
      color: #000;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 0.7rem;
      font-weight: 700;
    }
    .cat-body {
      display: none;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 12px 12px;
      padding: 8px;
    }
    .category-section.open .cat-body { display: block; }

    /* Intent Cards */
    .intent-card {
      display: block;
      background: linear-gradient(135deg, #16161f 0%, #1a1a26 100%);
      border-left: 3px solid var(--accent);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.15s;
      text-decoration: none;
    }
    .intent-card:last-child { margin-bottom: 0; }
    .intent-card:active { transform: scale(0.98); opacity: 0.8; }
    .intent-label {
      font-weight: 600;
      color: var(--warning);
      font-size: 0.9rem;
      margin-bottom: 4px;
    }
    .intent-purpose {
      color: var(--text-dim);
      font-size: 0.8rem;
    }

    /* Tried states */
    .intent-card.tried {
      opacity: 0.35;
      border-left-color: #444;
    }
    .intent-card.tried .intent-label { color: #666; }
    .intent-card.last-tried {
      opacity: 0.5;
      border-left-color: var(--warning);
      background: linear-gradient(135deg, #1a1505 0%, #1a1a26 100%);
    }
    .intent-card.last-tried::after {
      content: " (last)";
      color: var(--warning);
      font-size: 0.7rem;
    }

    /* Priority styling */
    .cat-header[data-priority="critical"] { border-left: 4px solid var(--danger); }
    .cat-header[data-priority="high"] { border-left: 4px solid var(--warning); }

    /* ============ QR VIEW ============ */
    .qr-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    .qr-item {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px;
      text-align: center;
      cursor: pointer;
    }
    .qr-item:active { transform: scale(0.98); }
    .qr-item .qr-box {
      background: #fff;
      border-radius: 8px;
      padding: 8px;
      margin-bottom: 8px;
      display: inline-block;
    }
    .qr-item .qr-label {
      font-size: 0.75rem;
      color: var(--text);
      font-weight: 500;
    }

    /* QR Modal */
    .qr-modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.9);
      z-index: 200;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    .qr-modal.active { display: flex; }
    .qr-modal .qr-large {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
    }
    .qr-modal .qr-title {
      color: var(--accent);
      font-size: 1.1rem;
      margin-top: 20px;
      text-align: center;
    }
    .qr-modal .qr-close {
      margin-top: 20px;
      padding: 12px 30px;
      background: var(--danger);
      color: #fff;
      border: none;
      border-radius: 25px;
      font-size: 1rem;
      cursor: pointer;
    }

    /* ============ ADMIN VIEW ============ */
    .admin-section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 12px;
    }
    .admin-title {
      font-size: 1rem;
      color: var(--accent);
      margin-bottom: 12px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    .admin-stat {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
      font-size: 0.85rem;
    }
    .admin-stat:last-child { border-bottom: none; }
    .admin-stat-value { color: var(--accent); font-weight: 600; }

    /* Password Modal */
    .password-modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.95);
      z-index: 300;
      align-items: center;
      justify-content: center;
    }
    .password-modal.active { display: flex; }
    .password-box {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 30px;
      text-align: center;
      width: 90%;
      max-width: 300px;
    }
    .password-box h3 {
      color: var(--accent);
      margin-bottom: 20px;
    }
    .password-box input {
      width: 100%;
      padding: 14px;
      font-size: 1.2rem;
      text-align: center;
      background: var(--bg-dark);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      margin-bottom: 16px;
      letter-spacing: 8px;
    }
    .password-box input:focus { outline: none; border-color: var(--accent); }
    .password-btn {
      width: 100%;
      padding: 12px;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
    }
    .password-error {
      color: var(--danger);
      font-size: 0.85rem;
      margin-top: 10px;
      display: none;
    }

    /* ============ BOTTOM BAR ============ */
    .bottom-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 100;
    }

    /* Layer 1: Controls */
    .bar-controls {
      background: var(--bg-header);
      border-top: 1px solid var(--border);
      padding: 10px 12px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .cat-pills {
      display: flex;
      gap: 6px;
      overflow-x: auto;
      flex: 1;
      padding: 2px 0;
      -webkit-overflow-scrolling: touch;
    }
    .cat-pills::-webkit-scrollbar { display: none; }
    .cat-pill {
      padding: 6px 12px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 15px;
      font-size: 0.75rem;
      color: var(--text-dim);
      cursor: pointer;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .cat-pill:active { transform: scale(0.95); }
    .cat-pill.active { background: var(--accent); color: #000; border-color: var(--accent); }

    .search-box {
      width: 100px;
      padding: 8px 10px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 0.8rem;
    }
    .search-box:focus { outline: none; border-color: var(--accent); width: 140px; }
    .search-box::placeholder { color: var(--text-dim); }

    .btn-reset {
      padding: 8px 12px;
      background: var(--danger);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 0.75rem;
      cursor: pointer;
    }
    .btn-reset:active { transform: scale(0.95); }

    /* Layer 2: Credits */
    .bar-credits {
      background: var(--bg-dark);
      padding: 6px 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 4px;
      font-size: 0.7rem;
      color: var(--text-dim);
    }
    .heart-btn {
      background: none;
      border: none;
      color: var(--danger);
      font-size: 0.9rem;
      cursor: pointer;
      padding: 2px 4px;
    }
    .heart-btn:active { transform: scale(1.2); }

    /* ============ EMPTY STATE ============ */
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-dim);
    }
    .empty-state .icon { font-size: 3rem; margin-bottom: 16px; }

    /* ============ LOADING ============ */
    .loading {
      text-align: center;
      padding: 40px;
      color: var(--text-dim);
    }

    /* Hide on certain views */
    .bar-controls.hidden { display: none; }
  </style>
</head>
<body>

  <!-- TOP HEADER -->
  <header class="top-header">
    <div class="logo">
      <img src="https://adbappcontrol.com/assets/img/logo_blue.png" alt="FRP">
      <span class="logo-text">FRP Toolkit</span>
    </div>
    <div class="header-tabs">
      <button class="header-tab" id="tab-intent" onclick="switchView('intent')">Intent</button>
      <button class="header-tab" id="tab-qr" onclick="switchView('qr')">QR</button>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="main-content">
    <!-- Intent View -->
    <div id="view-intent" class="view active">
      <div id="intent-categories">
        <div class="loading">Loading database...</div>
      </div>
    </div>

    <!-- QR View -->
    <div id="view-qr" class="view">
      <div id="qr-categories">
        <div class="loading">Loading QR codes...</div>
      </div>
    </div>

    <!-- Admin View -->
    <div id="view-admin" class="view">
      <div class="admin-section">
        <h3 class="admin-title">Statistics</h3>
        <div class="admin-stat">
          <span>Total Intents</span>
          <span class="admin-stat-value" id="stat-total">0</span>
        </div>
        <div class="admin-stat">
          <span>Categories</span>
          <span class="admin-stat-value" id="stat-cats">0</span>
        </div>
        <div class="admin-stat">
          <span>Tried This Session</span>
          <span class="admin-stat-value" id="stat-tried">0</span>
        </div>
      </div>

      <div class="admin-section">
        <h3 class="admin-title">Session Data</h3>
        <div class="admin-stat">
          <span>Export Database</span>
          <button class="btn-reset" onclick="exportDatabase()" style="background: var(--accent); color: #000;">Export JSON</button>
        </div>
        <div class="admin-stat">
          <span>Clear Session</span>
          <button class="btn-reset" onclick="resetIntentView()">Reset Tried</button>
        </div>
      </div>

      <div class="admin-section">
        <h3 class="admin-title">Device Info</h3>
        <div class="admin-stat">
          <span>User Agent</span>
          <span class="admin-stat-value" id="stat-ua" style="font-size: 0.65rem; max-width: 200px; word-break: break-all;">-</span>
        </div>
      </div>
    </div>
  </main>

  <!-- BOTTOM BAR -->
  <footer class="bottom-bar">
    <!-- Layer 1: Controls -->
    <div class="bar-controls" id="bar-controls">
      <div class="cat-pills" id="cat-pills">
        <!-- Populated by JS -->
      </div>
      <input type="text" class="search-box" id="search-box" placeholder="Search..." oninput="filterIntents()">
      <button class="btn-reset" onclick="resetIntentView()">Reset</button>
    </div>

    <!-- Layer 2: Credits -->
    <div class="bar-credits">
      <span>made by phenix with</span>
      <button class="heart-btn" onclick="showPasswordModal()">‚ù§Ô∏è</button>
      <span>and frustration</span>
    </div>
  </footer>

  <!-- QR MODAL -->
  <div class="qr-modal" id="qr-modal" onclick="closeQrModal(event)">
    <div class="qr-large" id="qr-large"></div>
    <div class="qr-title" id="qr-title"></div>
    <button class="qr-close" onclick="closeQrModal()">Close</button>
  </div>

  <!-- PASSWORD MODAL -->
  <div class="password-modal" id="password-modal">
    <div class="password-box">
      <h3>Admin Access</h3>
      <input type="password" id="admin-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="6" oninput="checkPassword()">
      <button class="password-btn" onclick="submitPassword()">Enter</button>
      <div class="password-error" id="password-error">Incorrect password</div>
    </div>
  </div>

  <script>
    // ============================================
    // EMBEDDED DATABASE
    // ============================================
    const categories = {
      voice_commands: { icon: "üó£Ô∏è", label: "Voice Commands", priority: "critical" },
      secret_codes: { icon: "üî¢", label: "Secret Codes", priority: "critical" },
      security: { icon: "üîí", label: "Lock & Security", priority: "critical" },
      third_party: { icon: "üì¶", label: "3rd Party Tools", priority: "critical" },
      general: { icon: "‚öôÔ∏è", label: "General Android", priority: "high" },
      settings: { icon: "üõ†Ô∏è", label: "Device Settings", priority: "high" },
      samsung: { icon: "üì±", label: "Samsung", priority: "high" },
      google: { icon: "üîµ", label: "Google Apps", priority: "medium" },
      xiaomi: { icon: "üì±", label: "Xiaomi", priority: "medium" },
      oneplus: { icon: "üì±", label: "OnePlus", priority: "medium" },
      oppo: { icon: "üì±", label: "OPPO", priority: "medium" },
      huawei: { icon: "üì±", label: "Huawei", priority: "medium" },
      realme: { icon: "üì±", label: "Realme", priority: "medium" },
      pixel: { icon: "üì±", label: "Google Pixel", priority: "medium" },
      motorola: { icon: "üì±", label: "Motorola", priority: "low" },
      lg: { icon: "üì±", label: "LG", priority: "low" },
      sony: { icon: "üì±", label: "Sony", priority: "low" },
      htc: { icon: "üì±", label: "HTC", priority: "low" },
      nokia: { icon: "üì±", label: "Nokia", priority: "low" },
      asus: { icon: "üì±", label: "Asus", priority: "low" },
      infinix: { icon: "üì±", label: "Infinix", priority: "low" }
    };

    // Voice Commands (merged from Assistant tab)
    const voiceCommands = [
      { id: "voice_001", category: "voice_commands", label: "Open Display Settings", intentUrl: "assistant://open-display-settings", purpose: "Say: 'Open Display Settings' - Works on SM-S721B" },
      { id: "voice_002", category: "voice_commands", label: "Open Accessibility", intentUrl: "assistant://open-accessibility", purpose: "Say: 'Open Accessibility' - Works on SM-S721B" },
      { id: "voice_003", category: "voice_commands", label: "Open Sound Settings", intentUrl: "assistant://open-sound-settings", purpose: "Say: 'Open Sound Settings' - Works on SM-S721B" },
      { id: "voice_004", category: "voice_commands", label: "Open Notifications", intentUrl: "assistant://open-notifications", purpose: "Say: 'Open Notifications' - Works on SM-S721B" },
      { id: "voice_005", category: "voice_commands", label: "Open Device Info", intentUrl: "assistant://open-device-info", purpose: "Say: 'Open Device Info' - Access About Phone" },
      { id: "voice_006", category: "voice_commands", label: "Open Settings", intentUrl: "assistant://open-settings", purpose: "Say: 'Open Settings'" },
      { id: "voice_007", category: "voice_commands", label: "Open Files", intentUrl: "assistant://open-files", purpose: "Say: 'Open Files'" },
      { id: "voice_008", category: "voice_commands", label: "Open Developer Options", intentUrl: "assistant://open-developer-options", purpose: "Say: 'Open Developer Options'" },
      { id: "voice_009", category: "voice_commands", label: "Open WiFi Settings", intentUrl: "assistant://open-wifi", purpose: "Say: 'Open WiFi Settings'" },
      { id: "voice_010", category: "voice_commands", label: "Open Bluetooth", intentUrl: "assistant://open-bluetooth", purpose: "Say: 'Open Bluetooth'" },
      { id: "voice_011", category: "voice_commands", label: "Open Security Settings", intentUrl: "assistant://open-security", purpose: "Say: 'Open Security Settings'" }
    ];

    // Secret Codes (merged from Codes tab)
    const secretCodes = [
      { id: "code_001", category: "secret_codes", label: "*#0808# - USB Settings", intentUrl: "tel:*#0808#", purpose: "CRITICAL - Change USB mode to MTP+ADB" },
      { id: "code_002", category: "secret_codes", label: "*#9900# - SysDump", intentUrl: "tel:*#9900#", purpose: "Debug logs, can enable USB debugging" },
      { id: "code_003", category: "secret_codes", label: "*#7284# - USB I2C", intentUrl: "tel:*#7284#", purpose: "USB path control settings" },
      { id: "code_004", category: "secret_codes", label: "*#0*# - Hardware Test", intentUrl: "tel:*#0*#", purpose: "Full diagnostic menu" },
      { id: "code_005", category: "secret_codes", label: "*#7353# - Quick Test", intentUrl: "tel:*#7353#", purpose: "Quick hardware tests" },
      { id: "code_006", category: "secret_codes", label: "*#0011# - Service Mode", intentUrl: "tel:*#0011#", purpose: "Network service info" },
      { id: "code_007", category: "secret_codes", label: "*#0228# - Battery", intentUrl: "tel:*#0228#", purpose: "Detailed battery status" },
      { id: "code_008", category: "secret_codes", label: "*#06# - IMEI", intentUrl: "tel:*#06#", purpose: "Shows IMEI number" },
      { id: "code_009", category: "secret_codes", label: "*#1234# - Firmware", intentUrl: "tel:*#1234#", purpose: "AP/CP/CSC versions" },
      { id: "code_010", category: "secret_codes", label: "*#12580*369# - All Info", intentUrl: "tel:*#12580*369#", purpose: "Complete SW/HW info" },
      { id: "code_011", category: "secret_codes", label: "*#2263# - RF Band", intentUrl: "tel:*#2263#", purpose: "Network band selection" },
      { id: "code_012", category: "secret_codes", label: "*#*#4636#*#* - Testing", intentUrl: "tel:*#*#4636#*#*", purpose: "Android testing menu" }
    ];

    // Main intent database (embedded from research/intent-database.json)
    const intentDatabase = [
      // Voice Commands
      ...voiceCommands,
      // Secret Codes
      ...secretCodes,
      // General Android
      { id: "general_001", category: "general", label: "Open Settings App", intentUrl: "intent://com.android.settings/#Intent;scheme=android-app;end", purpose: "Main settings launcher" },
      { id: "general_002", category: "general", label: "Open Settings (Action)", intentUrl: "intent:#Intent;action=android.settings.SETTINGS;end", purpose: "Settings via action intent" },
      { id: "general_003", category: "general", label: "USB Settings", intentUrl: "intent://com.android.settings.UsbSettingsActivity/#Intent;scheme=android-app;end", purpose: "USB connection - potential ADB access" },
      { id: "general_004", category: "general", label: "ADB Settings", intentUrl: "intent://com.android.settings.AdbSettingsActivity/#Intent;scheme=android-app;end", purpose: "ADB debugging - critical for bypass" },
      { id: "general_005", category: "general", label: "Calculator (AOSP)", intentUrl: "intent://com.android.calculator2/#Intent;scheme=android-app;end", purpose: "Basic calculator app" },
      { id: "general_006", category: "general", label: "Dial Pad", intentUrl: "tel:123456789", purpose: "Open phone dialer" },
      { id: "general_007", category: "general", label: "Open Contacts", intentUrl: "intent://com.android.contacts/#Intent;scheme=android-app;end", purpose: "Contacts app" },
      { id: "general_008", category: "general", label: "Launch Camera", intentUrl: "intent://android.media.action.IMAGE_CAPTURE#Intent;scheme=android-app;end", purpose: "Open camera for photo" },
      // Security
      { id: "security_001", category: "security", label: "Open Smart Lock", intentUrl: "intent://#Intent;scheme=promote_smartlock_scheme;package=com.google.android.gms;end", purpose: "Google Smart Lock - bypass vector" },
      { id: "security_002", category: "security", label: "Change Lock Type", intentUrl: "intent://#Intent;action=android.app.action.CHOOSE_LOCK;package=com.android.settings;end", purpose: "Lock type selection - critical" },
      { id: "security_003", category: "security", label: "Security Settings", intentUrl: "intent://#Intent;action=android.settings.SECURITY_SETTINGS;package=com.android.settings;end", purpose: "Security settings main" },
      { id: "security_004", category: "security", label: "Fingerprint Setup", intentUrl: "intent://#Intent;action=android.settings.FINGERPRINT_ENROLL;package=com.android.settings;end", purpose: "Fingerprint enrollment" },
      { id: "security_005", category: "security", label: "Set New PIN/Password", intentUrl: "intent://#Intent;action=android.app.action.SET_NEW_PASSWORD;package=com.android.settings;end", purpose: "Password creation - critical" },
      { id: "security_006", category: "security", label: "Device Admin Apps", intentUrl: "intent://#Intent;action=android.settings.DEVICE_ADMIN_SETTINGS;package=com.android.settings;end", purpose: "Device administrator list" },
      { id: "security_007", category: "security", label: "Credential Storage", intentUrl: "intent://#Intent;action=android.settings.CREDENTIAL_STORAGE_SETTINGS;package=com.android.settings;end", purpose: "Credential management" },
      { id: "security_008", category: "security", label: "Trust Agents", intentUrl: "intent://#Intent;action=android.settings.TRUST_AGENTS_SETTINGS;package=com.android.settings;end", purpose: "Smart Lock trust agents" },
      { id: "security_009", category: "security", label: "Privacy Settings", intentUrl: "intent://#Intent;action=android.settings.PRIVACY_SETTINGS;package=com.android.settings;end", purpose: "Privacy configuration" },
      { id: "security_010", category: "security", label: "Location Settings", intentUrl: "intent://#Intent;action=android.settings.LOCATION_SOURCE_SETTINGS;package=com.android.settings;end", purpose: "GPS and location" },
      // Third Party Tools
      { id: "third_party_001", category: "third_party", label: "HushSMS", intentUrl: "intent://com.hushsms.app/#Intent;end", purpose: "FRP bypass SMS tool" },
      { id: "third_party_002", category: "third_party", label: "Alliance Shield", intentUrl: "intent://com.ss.ae/alliance_shield/#Intent;end", purpose: "Device admin FRP tool" },
      { id: "third_party_003", category: "third_party", label: "Alliance Shield X", intentUrl: "intent://com.ss.aex/alliance_shield_x/#Intent;end", purpose: "Device admin FRP tool v2" },
      { id: "third_party_004", category: "third_party", label: "Activity Launcher", intentUrl: "intent://com.activitylauncher/#Intent;end", purpose: "Launch hidden activities" },
      { id: "third_party_005", category: "third_party", label: "Test DPC", intentUrl: "intent://com.afwsamples.testdpc/#Intent;end", purpose: "Device Policy Controller" },
      { id: "third_party_006", category: "third_party", label: "ES File Explorer", intentUrl: "intent://com.estrongs.android.pop/#Intent;end", purpose: "File manager with root access" },
      { id: "third_party_007", category: "third_party", label: "Smart Switch", intentUrl: "intent://com.sec.android.easyMover/#Intent;end", purpose: "Samsung data transfer" },
      { id: "third_party_008", category: "third_party", label: "Quick Shortcut Maker", intentUrl: "intent://com.quickshortcutmaker/#Intent;end", purpose: "Create activity shortcuts" },
      { id: "third_party_009", category: "third_party", label: "Google Account Manager", intentUrl: "intent://com.google.android.gsf.login/#Intent;end", purpose: "Add Google account - critical" },
      // Settings
      { id: "settings_001", category: "settings", label: "Display Settings", intentUrl: "intent:#Intent;action=android.settings.DISPLAY_SETTINGS;end", purpose: "Screen and display options" },
      { id: "settings_002", category: "settings", label: "Notification Settings", intentUrl: "intent:#Intent;action=android.settings.APP_NOTIFICATION_SETTINGS;end", purpose: "App notification preferences" },
      { id: "settings_003", category: "settings", label: "Accessibility Settings", intentUrl: "intent:#Intent;action=android.settings.ACCESSIBILITY_SETTINGS;end", purpose: "Accessibility options - bypass help" },
      { id: "settings_004", category: "settings", label: "Wi-Fi Settings", intentUrl: "intent:#Intent;action=android.settings.WIFI_SETTINGS;end", purpose: "WiFi configuration" },
      { id: "settings_005", category: "settings", label: "Bluetooth Settings", intentUrl: "intent:#Intent;action=android.settings.BLUETOOTH_SETTINGS;end", purpose: "Bluetooth pairing" },
      { id: "settings_006", category: "settings", label: "Hotspot & Tethering", intentUrl: "intent:#Intent;action=android.settings.TETHER_SETTINGS;end", purpose: "Mobile hotspot" },
      { id: "settings_007", category: "settings", label: "Date & Time", intentUrl: "intent:#Intent;action=android.settings.DATE_SETTINGS;end", purpose: "Date and timezone" },
      { id: "settings_008", category: "settings", label: "Input Method", intentUrl: "intent:#Intent;action=android.settings.INPUT_METHOD_SETTINGS;end", purpose: "Keyboard selection" },
      { id: "settings_009", category: "settings", label: "NFC Settings", intentUrl: "intent:#Intent;action=android.settings.NFC_SETTINGS;end", purpose: "NFC configuration" },
      { id: "settings_010", category: "settings", label: "Data Usage", intentUrl: "intent:#Intent;action=android.settings.DATA_USAGE_SETTINGS;end", purpose: "Mobile data usage" },
      // Samsung
      { id: "samsung_001", category: "samsung", label: "Samsung Dialer", intentUrl: "intent://com.samsung.android.dialer/#Intent;scheme=android-app;end", purpose: "Samsung phone app" },
      { id: "samsung_002", category: "samsung", label: "MyFiles", intentUrl: "intent://com.sec.android.app.myfiles/#Intent;scheme=android-app;end", purpose: "Samsung file manager" },
      { id: "samsung_003", category: "samsung", label: "Galaxy Store", intentUrl: "intent://com.sec.android.app.samsungapps/#Intent;scheme=android-app;end", purpose: "Samsung app store" },
      { id: "samsung_004", category: "samsung", label: "One UI Launcher", intentUrl: "intent://com.sec.android.app.launcher/#Intent;scheme=android-app;end", purpose: "Samsung home launcher" },
      { id: "samsung_005", category: "samsung", label: "Hidden Menu", intentUrl: "intent://com.sec.android.hiddenmenu/#Intent;scheme=android-app;end", purpose: "Samsung hidden diagnostic" },
      { id: "samsung_006", category: "samsung", label: "Samsung Pass", intentUrl: "intent://com.samsung.android.samsungpass/#Intent;scheme=android-app;end", purpose: "Password manager" },
      { id: "samsung_007", category: "samsung", label: "Smart Switch", intentUrl: "intent://com.sec.android.easyMover/#Intent;scheme=android-app;end", purpose: "Data transfer" },
      { id: "samsung_008", category: "samsung", label: "Knox Secure Folder", intentUrl: "intent://com.samsung.knox.securefolder/#Intent;scheme=android-app;end", purpose: "Knox Secure Folder" },
      { id: "samsung_009", category: "samsung", label: "Device Care", intentUrl: "intent://com.samsung.android.lool/#Intent;scheme=android-app;end", purpose: "Device maintenance" },
      { id: "samsung_010", category: "samsung", label: "Samsung Browser", intentUrl: "intent://com.sec.android.app.sbrowser/#Intent;scheme=android-app;end", purpose: "Samsung browser" },
      { id: "samsung_011", category: "samsung", label: "Samsung Camera", intentUrl: "intent://com.sec.android.app.camera/#Intent;scheme=android-app;end", purpose: "Samsung camera" },
      { id: "samsung_012", category: "samsung", label: "Gallery", intentUrl: "intent://com.sec.android.gallery3d/#Intent;scheme=android-app;end", purpose: "Photo gallery" },
      // Google Apps
      { id: "google_001", category: "google", label: "Google Assistant", intentUrl: "intent://com.google.android.apps.googleassistant/#Intent;scheme=android-app;end", purpose: "Voice assistant" },
      { id: "google_002", category: "google", label: "Play Store", intentUrl: "intent://com.android.vending/#Intent;scheme=android-app;end", purpose: "App store" },
      { id: "google_003", category: "google", label: "YouTube", intentUrl: "intent://com.google.android.youtube/#Intent;scheme=android-app;end", purpose: "Video streaming" },
      { id: "google_004", category: "google", label: "Gmail", intentUrl: "intent://com.google.android.gm/#Intent;scheme=android-app;end", purpose: "Email client" },
      { id: "google_005", category: "google", label: "Google Maps", intentUrl: "intent://com.google.android.apps.maps/#Intent;scheme=android-app;end", purpose: "Navigation" },
      { id: "google_006", category: "google", label: "Chrome", intentUrl: "intent://com.android.chrome/#Intent;scheme=android-app;end", purpose: "Web browser" },
      { id: "google_007", category: "google", label: "Google Drive", intentUrl: "intent://com.google.android.apps.docs/#Intent;scheme=android-app;end", purpose: "Cloud storage" },
      { id: "google_008", category: "google", label: "Google Photos", intentUrl: "intent://com.google.android.apps.photos/#Intent;scheme=android-app;end", purpose: "Photo management" },
      { id: "google_009", category: "google", label: "Play Services", intentUrl: "intent://com.google.android.gms/#Intent;scheme=android-app;end", purpose: "Google services framework" },
      { id: "google_010", category: "google", label: "Files by Google", intentUrl: "intent://com.google.android.apps.nbu.files/#Intent;scheme=android-app;end", purpose: "File manager" },
      { id: "google_011", category: "google", label: "Google Lens", intentUrl: "intent://com.google.ar.lens/#Intent;scheme=android-app;end", purpose: "Visual search - QR scanning" }
    ];

    // ============================================
    // STATE
    // ============================================
    let currentView = 'intent';
    let triedIntents = [];
    let lastTriedId = null;
    let activeCategory = null;
    const ADMIN_PASSWORD = '357357';

    // ============================================
    // INITIALIZATION
    // ============================================
    document.addEventListener('DOMContentLoaded', () => {
      renderCategoryPills();
      renderIntentView();
      renderQrView();
      updateStats();
      document.getElementById('stat-ua').textContent = navigator.userAgent.substring(0, 80) + '...';
    });

    // ============================================
    // VIEW SWITCHING
    // ============================================
    function switchView(view) {
      currentView = view;

      // Update tabs
      document.querySelectorAll('.header-tab').forEach(t => t.classList.remove('active'));
      if (view === 'intent') {
        document.getElementById('tab-qr').classList.add('active');
        document.getElementById('tab-intent').classList.add('hidden');
        document.getElementById('tab-qr').classList.remove('hidden');
      } else if (view === 'qr') {
        document.getElementById('tab-intent').classList.add('active');
        document.getElementById('tab-qr').classList.add('hidden');
        document.getElementById('tab-intent').classList.remove('hidden');
      }

      // Update views
      document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
      document.getElementById('view-' + view).classList.add('active');

      // Show/hide controls bar (hide for admin)
      document.getElementById('bar-controls').classList.toggle('hidden', view === 'admin');
    }

    // ============================================
    // CATEGORY PILLS
    // ============================================
    function renderCategoryPills() {
      const container = document.getElementById('cat-pills');
      container.innerHTML = '<button class="cat-pill active" data-cat="all" onclick="filterByCategory(\'all\')">All</button>';

      Object.keys(categories).forEach(key => {
        const cat = categories[key];
        const pill = document.createElement('button');
        pill.className = 'cat-pill';
        pill.dataset.cat = key;
        pill.textContent = cat.icon + ' ' + cat.label;
        pill.onclick = () => filterByCategory(key);
        container.appendChild(pill);
      });
    }

    function filterByCategory(catKey) {
      activeCategory = catKey === 'all' ? null : catKey;

      // Update pills
      document.querySelectorAll('.cat-pill').forEach(p => {
        p.classList.toggle('active', p.dataset.cat === catKey);
      });

      // Filter categories
      document.querySelectorAll('.category-section').forEach(section => {
        const match = !activeCategory || section.dataset.category === activeCategory;
        section.style.display = match ? 'block' : 'none';
        if (match && activeCategory) section.classList.add('open');
      });

      // Scroll to top
      document.querySelector('.main-content').scrollTop = 0;
    }

    // ============================================
    // INTENT VIEW RENDERING
    // ============================================
    function renderIntentView() {
      const container = document.getElementById('intent-categories');
      container.innerHTML = '';

      // Group by category
      const grouped = {};
      intentDatabase.forEach(intent => {
        if (!grouped[intent.category]) grouped[intent.category] = [];
        grouped[intent.category].push(intent);
      });

      // Render in priority order
      Object.keys(categories).forEach(catKey => {
        const intents = grouped[catKey];
        if (!intents || intents.length === 0) return;

        const cat = categories[catKey];
        const section = document.createElement('div');
        section.className = 'category-section';
        section.dataset.category = catKey;

        section.innerHTML = `
          <div class="cat-header" data-priority="${cat.priority}" onclick="toggleCategory(this.parentElement)">
            <span class="cat-title">
              <span class="cat-icon">${cat.icon}</span>
              ${cat.label}
            </span>
            <span class="cat-count">${intents.length}</span>
          </div>
          <div class="cat-body"></div>
        `;

        const body = section.querySelector('.cat-body');
        renderIntentCards(body, intents);
        container.appendChild(section);
      });
    }

    function renderIntentCards(container, intents) {
      // Sort: non-tried first
      const sorted = [...intents].sort((a, b) => {
        const aTried = triedIntents.includes(a.id);
        const bTried = triedIntents.includes(b.id);
        if (aTried && !bTried) return 1;
        if (!aTried && bTried) return -1;
        return 0;
      });

      sorted.forEach(intent => {
        const card = document.createElement('div');
        card.className = 'intent-card';
        card.id = 'intent-' + intent.id;
        card.dataset.intentId = intent.id;

        if (intent.id === lastTriedId) {
          card.classList.add('last-tried');
        } else if (triedIntents.includes(intent.id)) {
          card.classList.add('tried');
        }

        card.innerHTML = `
          <div class="intent-label">${intent.label}</div>
          <div class="intent-purpose">${intent.purpose}</div>
        `;
        card.onclick = () => handleIntentClick(intent);
        container.appendChild(card);
      });
    }

    function toggleCategory(section) {
      section.classList.toggle('open');
    }

    // ============================================
    // INTENT CLICK HANDLING
    // ============================================
    function handleIntentClick(intent) {
      // Move previous tried to end
      if (lastTriedId && lastTriedId !== intent.id) {
        const prevCard = document.getElementById('intent-' + lastTriedId);
        if (prevCard) {
          prevCard.classList.remove('last-tried');
          prevCard.classList.add('tried');
          prevCard.parentElement.appendChild(prevCard);
        }
      }

      // Mark current as tried
      if (!triedIntents.includes(intent.id)) {
        triedIntents.push(intent.id);
      }
      lastTriedId = intent.id;

      // Update UI
      const card = document.getElementById('intent-' + intent.id);
      if (card) {
        card.classList.remove('tried');
        card.classList.add('last-tried');
      }

      updateStats();

      // Handle voice commands differently
      if (intent.category === 'voice_commands') {
        alert('üó£Ô∏è Voice Command:\n\n"Hey Google, ' + intent.label.replace('Open ', '') + '"');
        return;
      }

      // Open intent
      window.location.href = intent.intentUrl;
    }

    // ============================================
    // QR VIEW RENDERING
    // ============================================
    function renderQrView() {
      const container = document.getElementById('qr-categories');
      container.innerHTML = '';

      // Group by category
      const grouped = {};
      intentDatabase.forEach(intent => {
        // Skip voice commands for QR
        if (intent.category === 'voice_commands') return;
        if (!grouped[intent.category]) grouped[intent.category] = [];
        grouped[intent.category].push(intent);
      });

      Object.keys(categories).forEach(catKey => {
        const intents = grouped[catKey];
        if (!intents || intents.length === 0) return;

        const cat = categories[catKey];
        const section = document.createElement('div');
        section.className = 'category-section';
        section.dataset.category = catKey;

        section.innerHTML = `
          <div class="cat-header" data-priority="${cat.priority}" onclick="toggleCategory(this.parentElement)">
            <span class="cat-title">
              <span class="cat-icon">${cat.icon}</span>
              ${cat.label}
            </span>
            <span class="cat-count">${intents.length}</span>
          </div>
          <div class="cat-body">
            <div class="qr-grid"></div>
          </div>
        `;

        const grid = section.querySelector('.qr-grid');
        intents.slice(0, 10).forEach(intent => {
          const item = document.createElement('div');
          item.className = 'qr-item';
          item.onclick = () => showQrModal(intent);

          const qrBox = document.createElement('div');
          qrBox.className = 'qr-box';

          // Generate small QR
          const qr = new QRCode(qrBox, {
            text: intent.intentUrl,
            width: 80,
            height: 80,
            colorDark: '#000',
            colorLight: '#fff',
            correctLevel: QRCode.CorrectLevel.L
          });

          item.appendChild(qrBox);
          item.innerHTML += `<div class="qr-label">${intent.label}</div>`;
          grid.appendChild(item);
        });

        container.appendChild(section);
      });
    }

    function showQrModal(intent) {
      const modal = document.getElementById('qr-modal');
      const large = document.getElementById('qr-large');
      const title = document.getElementById('qr-title');

      large.innerHTML = '';
      new QRCode(large, {
        text: intent.intentUrl,
        width: 200,
        height: 200,
        colorDark: '#000',
        colorLight: '#fff',
        correctLevel: QRCode.CorrectLevel.L
      });

      title.textContent = intent.label;
      modal.classList.add('active');
    }

    function closeQrModal(e) {
      if (!e || e.target.classList.contains('qr-modal') || e.target.classList.contains('qr-close')) {
        document.getElementById('qr-modal').classList.remove('active');
      }
    }

    // ============================================
    // SEARCH & FILTER
    // ============================================
    function filterIntents() {
      const search = document.getElementById('search-box').value.toLowerCase();

      document.querySelectorAll('.category-section').forEach(section => {
        let hasVisible = false;

        section.querySelectorAll('.intent-card').forEach(card => {
          const label = card.querySelector('.intent-label').textContent.toLowerCase();
          const purpose = card.querySelector('.intent-purpose').textContent.toLowerCase();
          const matches = !search || label.includes(search) || purpose.includes(search);
          card.style.display = matches ? 'block' : 'none';
          if (matches) hasVisible = true;
        });

        section.style.display = hasVisible ? 'block' : 'none';
        if (search && hasVisible) section.classList.add('open');
      });
    }

    // ============================================
    // RESET
    // ============================================
    function resetIntentView() {
      triedIntents = [];
      lastTriedId = null;
      document.getElementById('search-box').value = '';
      activeCategory = null;

      document.querySelectorAll('.cat-pill').forEach(p => {
        p.classList.toggle('active', p.dataset.cat === 'all');
      });

      renderIntentView();
      updateStats();
    }

    // ============================================
    // ADMIN
    // ============================================
    function showPasswordModal() {
      document.getElementById('password-modal').classList.add('active');
      document.getElementById('admin-password').value = '';
      document.getElementById('admin-password').focus();
    }

    function checkPassword() {
      const input = document.getElementById('admin-password');
      if (input.value === ADMIN_PASSWORD) {
        document.getElementById('password-modal').classList.remove('active');
        switchView('admin');
        updateStats();
      }
    }

    function submitPassword() {
      const input = document.getElementById('admin-password');
      if (input.value === ADMIN_PASSWORD) {
        document.getElementById('password-modal').classList.remove('active');
        switchView('admin');
        updateStats();
      } else {
        document.getElementById('password-error').style.display = 'block';
        input.value = '';
        setTimeout(() => {
          document.getElementById('password-error').style.display = 'none';
        }, 2000);
      }
    }

    function updateStats() {
      document.getElementById('stat-total').textContent = intentDatabase.length;
      document.getElementById('stat-cats').textContent = Object.keys(categories).length;
      document.getElementById('stat-tried').textContent = triedIntents.length;
    }

    function exportDatabase() {
      const data = {
        metadata: {
          exported: new Date().toISOString(),
          totalIntents: intentDatabase.length
        },
        categories: categories,
        intents: intentDatabase
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'frp-intent-database.json';
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
